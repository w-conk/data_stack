import { createTooltip } from "@melt-ui/svelte";
import { createBitAttrs, getOptionUpdater, removeUndefined } from "../../internal/index.js";
import { getContext, setContext } from "svelte";
const NAME = "tooltip";
const PARTS = ["arrow", "content", "trigger"];
export const getAttrs = createBitAttrs(NAME, PARTS);
export function setCtx(props) {
    const tooltip = createTooltip({
        positioning: {
            placement: "top"
        },
        openDelay: 700,
        ...removeUndefined(props)
    });
    setContext(NAME, tooltip);
    return {
        ...tooltip,
        updateOption: getOptionUpdater(tooltip.options)
    };
}
export function getCtx(sideOffset = 0) {
    const tooltip = getContext(NAME);
    const { options: { positioning } } = tooltip;
    positioning.update((prev) => ({ ...prev, gutter: sideOffset }));
    return tooltip;
}
export function setArrow(size = 8) {
    const tooltip = getCtx();
    tooltip.options.arrowSize.set(size);
    return tooltip;
}
