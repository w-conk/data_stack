<script>import { derived } from "svelte/store";
import { setCtx } from "../ctx.js";
export let required = void 0;
export let disabled = void 0;
export let arrowSize = void 0;
export let preventScroll = void 0;
export let loop = void 0;
export let closeOnEscape = void 0;
export let closeOnOutsideClick = void 0;
export let portal = void 0;
export let positioning = void 0;
export let name = void 0;
export let multiple = void 0;
export let selected = void 0;
export let onSelectedChange = void 0;
export let open = void 0;
export let onOpenChange = void 0;
export let forceVisible = true;
const {
  states: { open: localOpen, selected: localSelected },
  updateOption,
  ids
} = setCtx({
  required,
  disabled,
  arrowSize,
  preventScroll,
  loop,
  closeOnEscape,
  closeOnOutsideClick,
  portal,
  positioning,
  name,
  multiple,
  forceVisible,
  defaultSelected: selected,
  defaultOpen: open,
  onSelectedChange: ({ next }) => {
    if (selected !== next) {
      onSelectedChange?.(next);
      selected = next;
    }
    return next;
  },
  onOpenChange: ({ next }) => {
    if (open !== next) {
      onOpenChange?.(next);
      open = next;
    }
    return next;
  }
});
const idValues = derived(
  [ids.menu, ids.trigger, ids.label],
  ([$menuId, $triggerId, $labelId]) => ({
    menu: $menuId,
    trigger: $triggerId,
    label: $labelId
  })
);
$:
  open !== void 0 && localOpen.set(open);
$:
  selected !== void 0 && localSelected.set(selected);
$:
  updateOption("required", required);
$:
  updateOption("disabled", disabled);
$:
  updateOption("arrowSize", arrowSize);
$:
  updateOption("preventScroll", preventScroll);
$:
  updateOption("loop", loop);
$:
  updateOption("closeOnEscape", closeOnEscape);
$:
  updateOption("closeOnOutsideClick", closeOnOutsideClick);
$:
  updateOption("portal", portal);
$:
  updateOption("positioning", positioning);
$:
  updateOption("name", name);
$:
  updateOption("multiple", multiple);
$:
  updateOption("forceVisible", forceVisible);
</script>

<slot ids={$idValues} />
