export class AbstractStore {
    #subscribers = new Set();
    subscribe = (subFn) => {
        this.#subscribers.add(subFn);
        subFn(this.value());
        return () => this.#subscribers.delete(subFn);
    };
    publish = () => {
        // get value before iterating to ensure consistency
        const value = this.value();
        this.#subscribers.forEach((sub) => sub(value));
    };
}
//# sourceMappingURL=abstract.store.js.map